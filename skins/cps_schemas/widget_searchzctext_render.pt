<fieldset tal:define="mode options/mode;
                      ds options/datastructure;
                      widget_base_htmlid string:${here/getHtmlWidgetId}_;
                      widget_base_id string:${here/getWidgetId}_;"
          id="advancedSearchZCText">
  <tal:block repeat="operator here/operators"><tal:block
     define="widget_htmlid string:${widget_base_htmlid}${operator};
             widget_id string:${widget_base_id}${operator};
             field_htmlid string:${widget_htmlid}_field;
             field_id string:${widget_id}_field;">
    <label tal:attributes="for widget_htmlid"
           tal:content="string:cpsschemas_label_zctext_operator_${operator}"
           i18n:translate="" />
    <input type="text" size="28"
           tal:attributes="id widget_htmlid;
                           name widget_htmlid;
                           value ds/?widget_id" />
    <select tal:attributes="name field_htmlid">
      <tal:block repeat="field here/fields">
        <option tal:attributes="value field;
                                selected python:test(field == ds[field_id],
                                'selected', nothing)"
                tal:content="string:cpsschemas_label_zctext_field_${field}"
                i18n:translate="" />
      </tal:block>
      </select><br />
  </tal:block></tal:block>
</fieldset>
