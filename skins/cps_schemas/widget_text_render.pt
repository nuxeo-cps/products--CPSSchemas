<tal:block define="mode options/mode;
                   value_name here/getHtmlWidgetId;
                   value options/value;
                   rformat options/render_format;
                   rposition options/render_position;
  ">
<tal:block condition="python: mode == 'view'">
 <div tal:attributes="class python:test(rposition == 'col_left', 'dcolleft',
                                        test(rposition == 'col_right',
                                             'dcolright', 'dnocol'))"
    tal:content="structure value" />
</tal:block>
<tal:block condition="python: mode == 'edit'">
   <button type="button" style="float: right;"
    tal:condition="here/configurable" tal:attributes="onclick
    string:javascript:popup_rte('${value_name}', '${here/label_edit}');;"
    >...</button>
  <textarea
    tal:attributes="id value_name;
                    name value_name;
                    cols here/width;
                    rows here/height;"
    tal:content="value" />
  <div tal:condition="here/configurable"
    tal:define="rposition_name string:${value_name}_rposition;
                rformat_name string:${value_name}_rformat;">
   <span i18n:translate="">cpsschemas_render_format</span>
   <select tal:attributes="name rformat_name">
     <option tal:repeat="op here/all_render_formats"
       tal:attributes="selected python:op == rformat;
                       value op"
       tal:content="string:cpsschemas_rformat_${op}" i18n:translate="" />
   </select>
   <span i18n:translate="">cpsschemas_render_position</span>
   <select tal:attributes="name rposition_name">
     <option tal:repeat="op here/all_render_positions"
       tal:attributes="selected python:op == rposition;
                       value op"
       tal:content="string:cpsschemas_rposition_${op}" i18n:translate=""  />
   </select>
   <br><br>
  </div>
</tal:block>
</tal:block>
