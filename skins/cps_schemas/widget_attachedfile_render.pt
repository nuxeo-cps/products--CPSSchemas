<tal:block define="mode options/mode;
                   id here/getWidgetId;
                   current_name options/current_name;
                   empty_file python:current_name == '-';
                   mimetype options/mimetype;
                  ">
<tal:block condition="python: mode == 'view' and not empty_file">
  <tal:block define="preview_id python:options['datastructure'][id+'_preview']">
    <a href="http://url..."
       tal:attributes="href python:here.fields[0]"

    >
    <tal:block condition="mimetype"
      replace="structure python:here.getImgTag(mimetype.icon_path,
      title=mimetype.name())" />
    <tal:block replace="current_name" />
    </a>
    <span tal:condition="preview_id">
      <a href="http://url..." target="_blank"
         tal:attributes="href preview_id"
         i18n:translate="cpsschema_link_preview">
       (preview)
      </a>
    </span>
  </tal:block>
</tal:block>
<metal:block define-macro="file_edit"
  tal:condition="python: mode == 'edit'">
  <table cellpadding="0" cellspacing="0" border="0"
    tal:define="name here/getHtmlWidgetId;
                radio_name string:${name}_choice;">
    <tr>
      <td valign="middle" nowrap>
        <input type="radio" class="noborder" name="." value="keep"
          checked="checked"
          tal:attributes="name radio_name;
                          id string:${radio_name}_keep">
        <label i18n:translate="cpsschemas_label_file_none"
          tal:condition="empty_file"
          tal:attributes="for string:${radio_name}_keep">None</label>
        <label i18n:translate="cpsschemas_label_file_keep"
          tal:condition="not: empty_file"
          tal:attributes="for string:${radio_name}_keep">Keep</label>
      </td>
      <td valign="middle">
        <a href="http://url..." target="_blank"
          tal:condition="python: not empty_file"
          tal:attributes="href python:here.fields[0]">
        <tal:block condition="mimetype"
          replace="structure python:here.getImgTag(mimetype.icon_path,
          title=mimetype.name())" />
        <tal:block replace="current_name" />
        </a>
      </td>
    </tr>
    <tr>
      <td valign="middle" nowrap>
        <input type="radio" class="noborder"  name="." value="change"
               tal:attributes="name radio_name;
                               id string:${radio_name}_change">
        <label i18n:translate="cpsschemas_label_file_change"
               tal:attributes="for string:${radio_name}_change">Change</label>
        &nbsp;
      </td>
      <td valign="middle">
        <input type="file" name="."
               tal:attributes="name name;
		               onclick string:document.getElementById('${radio_name}_change').checked='checked'
		">
      </td>
    </tr>
    <tr tal:condition="python:here.deletable and not empty_file">
      <td valign="middle" colspan="2" nowrap>
        <input type="radio" class="noborder" name="." value="delete"
               tal:attributes="name radio_name;
                               id string:${radio_name}_delete">
        <label i18n:translate="cpsschemas_label_file_delete"
               tal:attributes="for string:${radio_name}_delete">Delete</label>
      </td>
    </tr>
  </table>
</metal:block>
</tal:block>
