<tal:block>


 <script src="/cps/jquery.min.js" type="text/javascript"></script>
  <script src="/cps/jquery-ui.custom.min.js" type="text/javascript"></script>
  <script src="/cps/jquery.cookie.js" type="text/javascript"></script>

  <link href="/cps/ui.dynatree.css" rel="stylesheet" type="text/css" id="skinSheet">
  <script src="/cps/jquery.dynatree.min.js" type="text/javascript"></script>


<script type="text/javascript"
        src="/cps/tiny_mce_popup.js"></script>

<script type="text/javascript">

var document_browser_dialog = {
    // Here goes your code for setting your custom things onLoad.
    init : function () {

    //var win = tinyMCEPopup.getWindowArg("window");
    //var input = tinyMCEPopup.getWindowArg("input");
    //var res = tinyMCEPopup.getWindowArg("resizable");
    //var inline = tinyMCEPopup.getWindowArg("inline");

    },
    submit : function () {
    // Here goes your code to insert the retrieved URL value into the original dialog window.

    // insert information now
    var win = tinyMCEPopup.getWindowArg("window");
    win.document.getElementById(tinyMCEPopup.getWindowArg("input")).value = 'lullal';

    // close popup window
    tinyMCEPopup.close();
    }
}

tinyMCEPopup.onInit.add(document_browser_dialog.init, document_browser_dialog);
</script>


  <script type="text/javascript">
    $(document).ready(function() {

      $(function() {
        $("#tree").dynatree({
          // using default options
        });
      });

   $("#btnAddObject").click(function(){
      // Sample: add an hierarchic branch using an array
      var obj = [
        { title: 'Folder node 3', isFolder: true,
          children: [
            { title: 'node 3.1' },
            { title: 'node 3.2',
              children: [
                { title: 'node 3.2.1' },
                { title: 'node 3.2.2',
                  children: [
                    { title: 'node 3.2.2.1' }
                  ]
                }
              ]
            }
          ]
        }
      ];
      $("#tree").dynatree("getRoot").addChild(obj);
    });

    });
  </script>

<form>
<p>
C'est bien la.
</p>

<div id="tree">
    <ul id="treeData" style="display: none;">
      <li id="id1" title="Look, a tool tip!">item1 with key and tooltip
      <li id="id2">item2
      <li id="id3" class="folder">Folder with some children
        <ul>
          <li id="id3.1">Sub-item 3.1
            <ul>
              <li id="id3.1.1">Sub-item 3.1.1
              <li id="id3.1.2">Sub-item 3.1.2
            </ul>
          <li id="id3.2">Sub-item 3.2
            <ul>
              <li id="id3.2.1">Sub-item 3.2.1
              <li id="id3.2.2">Sub-item 3.2.2
            </ul>
        </ul>
      <li id="id4" class="expanded">Document with some children (expanded on init)
        <ul>
          <li id="id4.1"  class="active focused">Sub-item 4.1 (active and focus on init)
            <ul>
              <li id="id4.1.1">Sub-item 4.1.1
              <li id="id4.1.2">Sub-item 4.1.2
            </ul>
          <li id="id4.2">Sub-item 4.2
            <ul>
              <li id="id4.2.1">Sub-item 4.2.1
              <li id="id4.2.2">Sub-item 4.2.2
            </ul>
        </ul>
    </ul>
  </div>

<p>
<button type="button" onclick="document_browser_dialog.submit();">OK</button>
</p>
<p>
<button type="button" id="btnAddObject">Add nodes</button>
</p>
</form>
</tal:block>
